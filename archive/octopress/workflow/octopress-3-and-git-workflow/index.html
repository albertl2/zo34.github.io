<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Octopress 3 and Git Workflow</title>
  <meta name="description" content="Octopress and Git Repos: Workflow?">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://albertlatham.com/octopress/workflow/octopress-3-and-git-workflow">
  <link rel="alternate" type="application/rss+xml" title="Student, Breaker, Maker" href="http://albertlatham.com/feed.xml" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Student, Breaker, Maker</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/projects/">Projects</a>
          
        
          
          <a class="page-link" href="/resume/">Resume</a>
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Octopress 3 and Git Workflow</h1>
    <p class="post-meta">Mar 5, 2015</p>
  </header>

  <article class="post-content">
    <h1 id="octopress-and-git-repos-workflow">Octopress and Git Repos: Workflow?</h1>

<p>I’m in the middle of getting this website set up and it dawned on me that I have no formal work flow at all. I’m certain that an established work flow will make the whole process of maintenance a lot easier. The Octopress 3.0 documentation does not make any note of this at all-likely for good reason (I would think most people using this platform already have a workflow in mind and don’t need to do much thinking before they set it up).</p>

<p>This post is here to help me think through and simultaneously record the work flow I want to use and perhaps help someone else do some thinking for their own process.</p>

<h1 id="relevant-items-to-consider">Relevant Items to Consider</h1>

<p>Currently there are two halves to Octopress 3.0:
1. The working files of Octopress that embody the actual framework that Octopress and Jekyll. These are the files that are downloaded and used to configure a website.
2. The output of Jekyll and Octopress. This is typically put in the <code>_site</code> folder within your working directory.</p>

<ul>
  <li>Things you do (likely) only once during the life of a site:
    <ol>
      <li>Download and setup the Octopress and Jekyll core.</li>
      <li>Setup github repos</li>
      <li>Setup initial Octopress/Jekyll configurations</li>
    </ol>
  </li>
  <li>Things you’ll do many times during the life of a site
    <ol>
      <li>Create and modify pages/posts/etc.</li>
      <li>Change themes/css/SaSS/other design elements</li>
    </ol>
  </li>
</ul>

<p>Tracking configuration changes isn’t really a big deal for me and so the only things the git repositories will be used for are tracking Octopress core files and the resulting static website files.</p>

<p>The first does not need to be public, though having a remote repo would not be a bad thing. The second will need to be pushed out to github for [publishing] <sup id="fnref:2"><a href="#fn:2" class="footnote">1</a></sup>.</p>

<p>According to the [Octopress 3.0 docs] <sup id="fnref:1"><a href="#fn:1" class="footnote">2</a></sup> setting up a website with github pages is relatively simple. Run <code>octopress deploy init git --url git@github.com:user/project</code>. The result is a <code>_deploy.yml</code> document (and probably some other things that I am not aware of).</p>

<p>The <code>_deploy.yml</code> is referenced every time the <code>octopress deploy</code> command is called in the Octopress working directory and it is suggested that it be added to <code>.gitignore</code> in order to protect the privacy of the user.</p>

<h2 id="getting-the-repos-right">Getting the Repos Right</h2>

<p>After fighting with Octopress’ <code>deploy</code> command I thought that it would be easier to write a simple bash script to handle most of the repetative typing for commits. Here’s what I wound up using:</p>

<h3 id="octopress-core">Octopress Core</h3>

<p>I created a git repo in my github account the normal way (using the web interface) and then push my working folder to it using the following:</p>

<pre><code class="language-bash">git init
git add .
git commit -m "initial commit"
git remote add origin git@github.com:myuser/website_source.git
</code></pre>

<p>Note that the <code>_site</code> folder is automatically added to <code>.gitignore</code> when initializing Octopress 3 (I think this is default behaviour, anyway).</p>

<blockquote>
  <p>I can’t manage to get Octopress to play nicely with SSH or HTTPS <code>octopress deploy</code> commands. I keep getting this string of errors:</p>
</blockquote>

<blockquote>
  <pre><code class="language-bash">octopress deploy
Syncing _site files to git@github.com:myuser/myuser.github.io.
fatal: 'deploy' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
</code></pre>

  <p>For reference here is the result of <code>octopress deploy init --url git@github.com:myuser/myuser.github.io</code>.</p>

  <pre><code class="language-bash">method: git                               # How do you want to d$
site_dir: _site                           # Location of your sta$

git_url: git@github.com:myuser/myuser.github.io  # remote repository$

# Note on git_branch:
# If using GitHub project pages, set the branch to 'gh-pages'.
# For GitHub user/organization pages or Heroku, set the branch t$
#
git_branch: master                        # Git branch where sta$
# remote_path:                            # Destination directory
</code></pre>
</blockquote>

<p>I then created a simple deployment script that ought to mimic the action of <code>octopress deploy</code>. The script resides in my Octopress working directory and simplifies the <code>git push</code> process somewhat simpler.</p>

<p>This first section eliminates necessary commands during the deployment phase.</p>

<pre><code class="language-bash"># octopress specific commands
octopress integrate
jekyll build

# git and deployment commands
# `octopress deploy` would normally take care of these commands
git add . &amp;&amp; git commit
git push origin -u master
cd _site
git add . &amp;&amp; git commit
git push origin -u master
echo "Done and done."
</code></pre>

<h3 id="published-site">Published Site</h3>

<p>For the static site content I created the appropriate git repo as per [here] <sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup> and [here] <sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup>. The command line stuff is largely the same as above as far as the git commands go. Because the bash script in the working directory descends into the <code>_site</code> directory there is no need for a second script.</p>

<h1 id="theory-and-execution">Theory and Execution</h1>

<p>The process I’ve managed to distill from this exercise is rather simple. Two repositories, one for Octopress core files, and one for the static site files. Each is updated each time commits are made (posts, pages, style, etc.). There are no development or bugfix repositories as the roll that those fill is the same as developing code on my computer and then pushing the results to github.</p>

<p>This work flow is far from complete but for the time being it serves my purposes.</p>

<h1 id="errata">Errata</h1>
<p>If you’ve made it this far you may have noticed some of the markdown syntax (such as footnotes) have not been parsed correctly. I don’t know what the problem is. I’ll make sure to post a solution when I come by one.</p>

<div class="footnotes">
  <ol>
    <li id="fn:2">
      <p>https://pages.github.com/ <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:1">
      <p>https://github.com/octopress/deploy <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>https://github.com/octopress/deploy/blob/master/README.md <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>https://pages.github.com/ <a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Student, Breaker, Maker</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Student, Breaker, Maker</li>
          <li><a href="mailto:albert.latham@aggiemail.usu.edu">albert.latham@aggiemail.usu.edu</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/zo34">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">zo34</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/albertlatham">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">albertlatham</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Resume, CV, project log, and blog of aspiring engineer, Albert Latham. Also features troubleshooting tips and solutions for Albert's current projects and interests.
</p>
      </div>
    </div>

  </div>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-44756137-2', 'auto');
	  ga('send', 'pageview');

	</script>
</footer>


  </body>

</html>
